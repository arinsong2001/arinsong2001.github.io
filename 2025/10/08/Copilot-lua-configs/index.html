<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Copilot.lua configs | æ‹ã®ã‚ã‚ğŸ¬</title>
  
    <link rel="icon" href="/assets/tools.ico">
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 8.0.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/twilight.jpg)">
        <div class='av-pic' style="background-image: url(/assets/kanae.jpeg)">
        </div>
    </section>
    <section class='menu'>
        <div>æ‹ã®ã‚ã‚ğŸ¬</div>
        
            <div>æ¬¡ã®å¹´ã‚‚ã€ã¾ãŸè¦‹ã‚Œã‚‹ã‹ãªï¼Ÿ</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
            
                <a target="_blank" rel="noopener" href="https://github.com/arinsong2001">
                    <img src="/assets/github.svg" />
                </a>
            
        
            
                <a target="_blank" rel="noopener" href="https://twitter.com/arinsong2001">
                    <img src="/assets/twitter.svg" />
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class='ContentView'>
    <header class='PageTitle'>
        <h1>Copilot.lua configs</h1>
    </header>

    <section>
      <h3 id="é…ç½®Copilotè¡¥å…¨çš„ç»éªŒä¹¦"><a href="#é…ç½®Copilotè¡¥å…¨çš„ç»éªŒä¹¦" class="headerlink" title="é…ç½®Copilotè¡¥å…¨çš„ç»éªŒä¹¦"></a>é…ç½®Copilotè¡¥å…¨çš„ç»éªŒä¹¦</h3><p>åå•¬å¾®è½¯æŠŠ<code>copilot</code>çš„freeå¥—é¤å¼„å¾—å°å°ï¼Œç©·è‹¦äººå®¶åªå¾—å‹’ç´§è£¤è…°å¸¦è¿‡æ—¥å­ã€‚</p>
<p><code>copilot.lua</code>æ€»æ˜¯é»˜è®¤å¯ç”¨ï¼Œæ˜æ˜åªæ˜¯éšä¾¿ç”¨ç”¨ï¼Œä¸Š<code>github</code>ä¸€æŸ¥ï¼Œé¢åº¦ç«Ÿä¸å‰©å¤šå°‘ã€‚</p>
<p>é‚é‡‡ç”¨å¤šç§æ–¹æ³•ä¼å›¾è®©å®ƒé»˜è®¤ç¦ç”¨ï¼Œå¹¶ä¸”å¯ä»¥éšæ‰‹å¯ç”¨ï¼Œé€”ä¸­æ‰€è§æ‰€é—»ä¸å°‘ï¼Œå€¼å¾—è®°å½•ã€‚</p>
<h4 id="åˆæ¬¡å°è¯•"><a href="#åˆæ¬¡å°è¯•" class="headerlink" title="åˆæ¬¡å°è¯•"></a>åˆæ¬¡å°è¯•</h4><p>æœ€åˆçš„å°è¯•æœ‰ç‚¹æƒ³å½“ç„¶ï¼Œåªæ˜¯åœ¨<code>plugins.lua</code>é‡Œæ·»åŠ äº†ä¸€æ¡<code>enabled = false</code>.</p>
<p>ç„¶è€Œè¿™ä¼šè®©<code>copilot.lua</code>æ•´ä½“è¢«ç¦ç”¨ï¼Œä¸èƒ½é€šè¿‡<code>:Copilot enable</code>æ‰‹åŠ¨å¯ç”¨ã€‚</p>
<p>æ— ç–¾è€Œç»ˆã€‚</p>
<p>æ±‚åŠ©<code>gpt</code>è€å¸ˆï¼Œäººæ²¡è®¿åˆ°ï¼Œåªæœ‰ä¸ªäººå·¥æ™ºéšœå‰æ¥æ¥å¾…ï¼Œç»™å‡ºçš„ç­”æ¡ˆç‰›å¤´ä¸å¯¹é©¬å˜´ã€‚</p>
<p>æœ€ç»ˆä¸è‡ªå·±å’Œè§£ï¼Œæƒ³åœ¨<code>nvim</code>å¯åŠ¨åç”¨<code>autocmd</code>ç¦ç”¨ä¸€ä¸‹çœ‹è¡Œä¸è¡Œã€‚</p>
<p>ä»¥ä¸‹æ˜¯æœ€åˆçš„<code>autocmd</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim.api.nvim_create_autocmd(&quot;VimEnter&quot;, &#123;</span><br><span class="line">  callback = function()</span><br><span class="line">    vim.cmd(&quot;Copilot disable&quot;)</span><br><span class="line">  end,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸Šè¿™æ ·å†™ç¡®å®èƒ½èµ·ä½œç”¨ï¼Œåªæ˜¯æ¯æ¬¡å¯åŠ¨<code>nvim</code>éƒ½ä¼šåœ¨å³ä¸Šè§’å¼¹å‡ºæ„ä¹‰ä¸æ˜çš„é€šçŸ¥å’Œè­¦å‘Šï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Notify [Copilot.lua] copilot is offline</span><br><span class="line">Warning [Copilot.lua] copilot is disabled</span><br></pre></td></tr></table></figure>

<p>å¥‡æ€ªçš„æ˜¯ä¸ä½¿ç”¨<code>autocmd</code>è½¬è€Œæ‰‹åŠ¨<code>disable</code>å°±ä¸ä¼šè§¦å‘ä»¥ä¸Šé€šçŸ¥å’Œè­¦å‘Šã€‚</p>
<p>ç»ç ”ç©¶ï¼Œåœ¨<code>copilot</code>å¤„äº<code>disabled</code>çŠ¶æ€æ—¶æ‰§è¡Œ<code>:Copilot attach</code>ä¼šè§¦å‘â€œè­¦å‘Šâ€ã€‚</p>
<p>åˆæ­¥æ€€ç–‘å…¶ä»–æ’ä»¶åŠ è½½æ—¶ä¼šä¾èµ–è¯¥æ’ä»¶ï¼Œæ­¤æ—¶ä¼šè§¦å‘<code>offline</code>çš„é€šçŸ¥ã€‚</p>
<p>åå°è¯•æ·»åŠ å»¶æ—¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim.api.nvim_create_autocmd(&quot;VimEnter&quot;, &#123;</span><br><span class="line">  callback = function()</span><br><span class="line">    vim.defer_fn(function()</span><br><span class="line">      vim.cmd(&quot;Copilot disable&quot;)</span><br><span class="line">    end, 100)</span><br><span class="line">  end,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ›´æ¢è§¦å‘äº‹ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim.api.nvim_create_autocmd(&quot;LspAttach&quot;, &#123;</span><br><span class="line">  callback = function(args)</span><br><span class="line">    local client = vim.lsp.get_client_by_id(args.data.client_id)</span><br><span class="line">    if client and client.name == &quot;copilot&quot; then</span><br><span class="line">      vim.defer_fn(function()</span><br><span class="line">        vim.cmd(&quot;Copilot disable&quot;)</span><br><span class="line">      end, 100)</span><br><span class="line">    end</span><br><span class="line">  end,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å‡å¤±è´¥ï¼Œå‰è€…ä»ä¼šè§¦å‘é€šçŸ¥å’Œè­¦å‘Šï¼Œåè€…åœ¨æ‰‹åŠ¨<code>enable</code>åä¹Ÿä¼šæ‰§è¡Œ<code>disable</code>, å¯¼è‡´<code>copilot</code>æ°¸è¿œå¤„äº<code>disabled</code>çŠ¶æ€ã€‚</p>
<p>é€”ä¸­è¿˜å­¦ä¹ äº†<code>nvim</code>å¯åŠ¨æ—¶è§¦å‘äº‹ä»¶çš„é¡ºåºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufAdd(åˆå§‹Buffer) â†’ BufEnter(åˆå§‹Buffer) â†’ VimEnter â†’ BufAdd â†’ BufEnter â†’ FileType/Syntax â†’ LspAttach</span><br></pre></td></tr></table></figure>

<h4 id="æˆåŠŸå´éä¼˜é›…"><a href="#æˆåŠŸå´éä¼˜é›…" class="headerlink" title="æˆåŠŸå´éä¼˜é›…"></a>æˆåŠŸå´éä¼˜é›…</h4><p>åœ¨æœ€åä¸€ç‰ˆ<code>autocmd</code>çš„åŸºç¡€ä¸Šæ·»åŠ åªä¼šæ‰§è¡Œä¸€æ¬¡çš„é€»è¾‘ï¼Œå¯ä»¥å‹‰å¼ºæ»¡è¶³éœ€æ±‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim.api.nvim_create_autocmd(&quot;LspAttach&quot;, &#123;</span><br><span class="line">  callback = function(args)</span><br><span class="line">    local client = vim.lsp.get_client_by_id(args.data.client_id)</span><br><span class="line">    if not vim.g.copilot_once_disabled and client and client.name == &quot;copilot&quot; then</span><br><span class="line">      vim.defer_fn(function()</span><br><span class="line">        vim.cmd(&quot;Copilot disable&quot;)</span><br><span class="line">        vim.g.copilot_once_disabled = true</span><br><span class="line">      end, 100)</span><br><span class="line">    end</span><br><span class="line">  end,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ååºä¼˜åŒ–åŒ…æ‹¬æ”¹ä¸ºä½¿ç”¨<code>local</code>å˜é‡ï¼Œç”¨<code>vim.schedule()</code>æ›¿ä»£<code>vim.defer_fn()</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">local copilot_once_disabled = false</span><br><span class="line"></span><br><span class="line">vim.api.nvim_create_autocmd(&quot;LspAttach&quot;, &#123;</span><br><span class="line">  callback = function(args)</span><br><span class="line">    local client = vim.lsp.get_client_by_id(args.data.client_id)</span><br><span class="line">    if not copilot_once_disabled and client and client.name == &quot;copilot&quot; then</span><br><span class="line">      vim.schedule(function() -- åœ¨å½“å‰nvimæ´»åŠ¨å®Œæˆåæ‰§è¡Œï¼Œæ¯”å›ºå®šå»¶æ—¶æ‰§è¡Œæ›´ç¨³å®š</span><br><span class="line">        vim.cmd(&quot;Copilot disable&quot;)</span><br><span class="line">        copilot_once_disabled = true</span><br><span class="line">      end)</span><br><span class="line">    end</span><br><span class="line">  end,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="çµæ„Ÿä¸€ç°"><a href="#çµæ„Ÿä¸€ç°" class="headerlink" title="çµæ„Ÿä¸€ç°"></a>çµæ„Ÿä¸€ç°</h4><p>æŸæ¬¡<code>nv test.txt</code>æ—¶ï¼Œæƒ³æ‰‹åŠ¨<code>enable</code>ä¸€ä¸‹<code>copilot</code>ï¼Œè§‚å¯Ÿåˆ°ä»¥ä¸‹ç°è±¡ï¼š</p>
<p>å³ä¸‹è§’<code>copilot</code>å›¾æ ‡å‡ºç°äº†ä¸€å°ä¼šå„¿ï¼Œéšå³æ¶ˆå¤±ï¼Œåç»­<code>enable</code>æ­£å¸¸ç”Ÿæ•ˆã€‚</p>
<p>é€€å‡ºï¼Œå°è¯•<code>nv test.py</code>å‘ç°åŠ è½½å®Œæˆåå°±ä¼šå‡ºç°<code>copilot</code>å›¾æ ‡å‡ºç°åˆæ¶ˆå¤±çš„ç°è±¡ã€‚</p>
<p>è¿™è¯´æ˜<code>nv test.txt</code>æ—¶<code>copilot</code>æ ¹æœ¬æ²¡æœ‰è¢«<code>enable</code>.</p>
<p>ä¹Ÿå°±æ˜¯è¯´<code>copilot.lua</code>èƒ½å¤Ÿæ ¹æ®æ–‡ä»¶ç±»å‹å†³å®šæ˜¯å¦<code>enable</code>.</p>
<p>å¸¦ç€è¿™ä¸ªå…³é”®ä¿¡æ¯å¯»è®¿<code>copilot.lua</code>çš„<code>github</code>ä¸»é¡µï¼Œæœç„¶å‘ç°<code>filetypes</code>é¡¹èƒ½å¤Ÿæ§åˆ¶è¿™ä¸€è¡Œä¸ºã€‚</p>
<p>è™½ç„¶ä¸»é¡µæ²¡æœ‰ç»™å‡ºé»˜è®¤é…ç½®ï¼Œä½†å£°ç§°é€šè¿‡æ·»åŠ <code>[&quot;*&quot;]</code>å¯ä»¥ç¦ç”¨é»˜è®¤é…ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If you add &quot;*&quot; as a filetype, the default configuration for filetypes won&#x27;t be used anymore.</span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆé…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;zbirenbaum/copilot.lua&quot;,</span><br><span class="line">  keys = &#123; &#123; &quot;&lt;leader&gt;ac&quot;, &quot;&lt;cmd&gt;Copilot! toggle&lt;cr&gt;&quot;, desc = &quot;Copilot! toggle&quot; &#125; &#125;,</span><br><span class="line">  opts = &#123; filetypes = &#123; [&quot;*&quot;] = false &#125; &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>Copilot! toggle</code>ä¸­çš„<code>!</code>ç¬¦å·è¡¨ç¤ºå¼ºåˆ¶æ‰§è¡Œï¼Œçœ‹èµ·æ¥<code>filetypes</code>é¡¹çš„ä¼˜å…ˆçº§ç›¸å½“é«˜ã€‚</p>
<p><code>autocmds.lua</code>é‡Œçš„ç›¸å…³é…ç½®ä¹Ÿæ²¡ç”¨äº†ï¼Œé…Œæƒ…åˆ å»ã€‚</p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>å¾®è½¯çš„åå•¬ä¹‹ä¸¾å€’é€¼æˆ‘ï¼š</p>
<ul>
<li><p>å›é¡¾<code>nvim</code>çš„<code>autocmd</code>å†™æ³•ï¼›</p>
</li>
<li><p>åˆ†æ<code>nvim</code>å¯åŠ¨æ—¶è§¦å‘äº‹ä»¶çš„é¡ºåºï¼›</p>
</li>
<li><p>æ˜è¾¨<code>vim.defer_fn()</code>å’Œ<code>vim.schedule()</code>çš„åŒºåˆ«ï¼›</p>
</li>
<li><p>äº†è§£é’ˆå¯¹å•ä¸€æ’ä»¶çš„å¿«æ·é”®çš„æ·»åŠ æ–¹å¼ï¼›</p>
</li>
<li><p>æ”¶è·æ—¶åˆ»å…³æ³¨ç»†å¾®ä¹‹å¤„çš„å®è´µç»éªŒã€‚</p>
</li>
</ul>


      

    </section>
    
      <section class='ArticleMeta'>
          <div>
            å‘å¸ƒäº&nbsp;
            <time datetime="2025-10-08T11:59:04.000Z" itemprop="datePublished">
              2025-10-08
            </time>
          </div>
          
      </section>
    
    
</article>

  
</div>

            <footer>
    <div>Â© 2025 - æ‹ã®ã‚ã‚ğŸ¬ </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>